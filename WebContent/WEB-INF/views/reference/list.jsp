<%@ page contentType="text/html; charset=UTF-8"%>
<%@ include file="../../common/taglib.jsp" %>

<section class="content">
	<div class="row page-titles">
		<div class="col-md-6 col-8 align-self-center">
			<h3 class="text-themecolor m-b-0 m-t-0"><spring:message code="referenceInfo" /></h3>
		</div>
	</div>
	
	
	<spring:message code='reward' var="reward"/>
	<div class="row el-element-overlay">
		<h4 class="text-themecolor m-b-0 m-t-0">
			<span style="padding-left: 15px;">
				马来西亚 Malaysia
			</span>
		</h4>
		<!-- column -->
		<div class="col-12 m-t-5">
			<div class="card-deck">
				<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_19.PNG" alt="Universal-通用" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(19);"><i class="icon-docs"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">Universal<br/>通用</h4><br/>
		                </div>
		            </div>
			  	</div>
				<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_20.PNG" alt="马来西亚投资潜力" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(20);"><i class="icon-docs"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">马来西亚投资潜力</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_21.PNG" alt="马来西亚第二家园" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(21);"><i class="icon-docs"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">马来西亚第二家园</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_22.PNG" alt="销售流程,费用" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(22);"><i class="icon-docs"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">销售流程,费用</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_23.PNG" alt="参团照片-第2天  柔佛APC" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(23);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">参团照片<br/>第2天  柔佛APC</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_24.PNG" alt="参团照片-第2天  柔佛APC介绍会" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(24);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">参团照片<br/>第2天  柔佛APC介绍会</h4><br/>
		                </div>
		            </div>
			  	</div>
			</div>
		</div>
		<!-- column -->
		<div class="col-12 m-t-5">
			<div class="card-deck">
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_25.PNG" alt="参团照片-马六甲Haleton介绍会" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(25);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">参团照片<br/>第2天 马六甲Haleton介绍会</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_26.PNG" alt="参团照片-马六甲Haleton产业" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(26);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">参团照片<br/>第2天 马六甲Haleton产业</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_27.PNG" alt="参团照片-柔佛双威依斯干达" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(27);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">参团照片<br/>第3天 柔佛双威依斯干达</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_28.PNG" alt="参团照片-吉隆坡大马金豪" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(28);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">参团照片<br/>第4天 吉隆坡大马金豪</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			</div>
		</div>
	</div>
	<br />
	<div class="row el-element-overlay">
		<h4 class="text-themecolor m-b-0 m-t-0">
			<span style="padding-left: 15px;">
				吉隆坡 Kuala Lumpur
			</span>
		</h4>
		<!-- column -->
		<div class="col-12 m-t-5">
			<div class="card-deck">
			  	<!-- Card -->
			  	<div class="card">
			  		<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_15.PNG" alt="Famous school-知名学校" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(15);"><i class="icon-docs"></i></a></li>
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(16);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">Famous school<br/>知名学校</h4><br/>
	                    </div>
	            	</div>
			  	</div>
			  	<!-- Card -->
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			</div>
		</div>
	</div>
	<br />
	<div class="row el-element-overlay">
		<h4 class="text-themecolor m-b-0 m-t-0">
			<span style="padding-left: 15px;">
				新山 Johor
			</span>
		</h4>
		<!-- column -->
		<div class="col-12 m-t-5">
			<div class="card-deck">
				<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_17.PNG" alt="Regional-地區通用" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(17);"><i class="icon-picture"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">Regional<br/>地區通用</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			</div>
		</div>
	</div>
	<br />
	<div class="row el-element-overlay">
		<h4 class="text-themecolor m-b-0 m-t-0">
			<span style="padding-left: 15px;">
				马六甲 Malacca
			</span>
		</h4>
		<!-- column -->
		<div class="col-12 m-t-5">
			<div class="card-deck">
				<!-- Card -->
				<div class="card">
				  	<div class="el-card-item">
		                <div class="el-card-avatar el-overlay-1"> <img src="${pageContext.request.contextPath}/resources/elastislide/images/pic/P_18.PNG" alt="Regional-地區通用" />
		                    <div class="el-overlay">
		                        <ul class="el-info">
		                            <li><a class="btn default btn-outline" href="javascript:btnFileClicked(18);"><i class="icon-docs"></i></a></li>
		                        </ul>
		                    </div>
		                </div>
		                <div class="el-card-content">
		                    <h4 class="box-title">Regional<br/>地區通用</h4><br/>
		                </div>
		            </div>
			  	</div>
			  	<!-- Card -->
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			  	<div class="card" style="background: #f2f7f8">&nbsp;</div>
			</div>
		</div>
	</div>
	</section>

<!--.燈箱 File -->
<div class="modal fade bs-example-modal-lg" id="modal_File" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
		<div class="modal-header">
			<h4 class="modal-title"><spring:message code="file"/></h4>
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      	</div>
		<div class="modal_msg" style="display: none"></div>
      	<div class="modal-body">
            <form role="form" id="formFile" name="formFile">
				<input type="hidden" name="fileType" id="queryFileType" value="REFERENCE" />
				<input type="hidden" name="referenceId" id="referenceId" value="" />
				<div class="box box-primary">
					<div class="box-body no-padding">
						<table class="table table-striped" id="referenceFileMain" width="100%">
							<thead>
								<tr>
									<th>#</th>
									<th><spring:message code="fileName"/></th>
									<th><spring:message code="fileSize"/></th>
									<!-- 
									<th><spring:message code="downloadTimes"/></th>
									<th><spring:message code="fileDescription"/></th>
									<th><spring:message code="updatedTime"/></th>
									 -->
									<th style="width: 50px;"><spring:message code="option"/></th>
								</tr>
							</thead>
						</table>
					</div>
				</div>
			</form>
		</div>
	</div><!-- /.modal-content -->
  </div>
</div>
<!--/.燈箱 File -->

<script type="text/javascript">

	var referenceFileMain;

	Number.prototype.format = function(n, x) {
	    var re = '\\d(?=(\\d{' + (x || 3) + '})+' + (n > 0 ? '\\.' : '$') + ')';
	    return this.toFixed(Math.max(0, ~~n)).replace(new RegExp(re, 'g'), '$&,');
	};

	/*
	$.Elastislide.defaults = {
		// orientation 'horizontal' || 'vertical'
		orientation : 'horizontal',

		// sliding speed
		speed : 500,

		// sliding easing
		easing : 'ease-in-out',

		// the minimum number of items to show.
		// when we resize the window, this will make sure minItems are always shown
		// (unless of course minItems is higher than the total number of elements)
		minItems : 3,

		// index of the current item (left most item of the carousel)
		start : 0,

		// click item callback
		onClick : function( el, position, evt ) { return false; },
		onReady : function() { return false; },
		onBeforeSlide : function() { return false; },
		onAfterSlide : function() { return false; }
	};
	
	
	$( '#area_1' ).elastislide();
	$( '#area_2' ).elastislide();
	$( '#area_3' ).elastislide();
	$( '#area_4' ).elastislide();
	*/
	
	$(function() {
		referenceFileMain = $('#referenceFileMain').DataTable(
				{
					"bFilter" : false,
					"ordering" : false,
					"info" : false,
					"serverSide" : true,
					"bLengthChange" : false,
					"ajax" : {
						"url" : '${pageContext.request.contextPath}/reference/getReferenceFiles.json',
						"type" : 'POST',
						"data" : function(d) {
									d.referenceId = $('#referenceId').val(),
									d.isAdmin = false
								}
					},
					"columns" : [
						{ "data" : "dataSeq" },
						{ "data" : "fullFileName" },
						{ "data" : "fileSize", "render": function ( data, type, full, meta ) {
														      return data.format() + ' KB';
													    } }
						/*
						{ "data" : "downloadTimes" },
						{ "data" : "fileDescription" },
						{ "data" : "updateTime" }
						*/
					],
					"columnDefs" : [
						{
							"targets" : 0,
						    render: function (data, type, row, meta) {
						        return meta.row + meta.settings._iDisplayStart + 1;
						    }
						},
						{
							"targets" : 3,
							"data" : 'seqNo',
							"render" : function(data, type, row) {
								return '<a href="#">'
										+'<span class="icon-docs" style="margin-right:10px" fileType="'+ row['fileType'] + '" seqNo="' + row['seqNo'] + '" onclick="btnDownloadClicked($(this));" title="<spring:message code="download"/>"></span></a>';
							}
						}
					],
					select: true
				});
	});

	//[File] 進入modal_File
	function btnFileClicked(referenceId) {
		$('#referenceId').val(referenceId);

		//if (referenceFileMain) {
		//	$('#referenceFileMain').DataTable().destroy();
		//}

		referenceFileMain.ajax.reload();	//重查資料

		$('#modal_File').modal();
	}
	
	//[Download] 按下Download按鈕
	function btnDownloadClicked(btn) {
		var downloadUrl = "${pageContext.request.contextPath}/manage/file/download?seqNo="+btn.attr('seqNo')+"&fileType="+btn.attr('fileType')+"&fromPage=reference/list";
	  	window.location.href = downloadUrl;

	  	setTimeout(function(){
	  		if (referenceFileMain) {
	  			referenceFileMain.ajax.reload();
	  		}
	  	}, 2000);
	}
</script>